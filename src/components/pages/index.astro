--
import Layout from '../layouts/Layout.astro';
import { onMount } from 'astro';
---

<Layout>
  <div id="splash" class="fixed inset-0 bg-white flex items-center justify-center z-50">
    <img src="/avatar.png" alt="Avatar" class="w-32 h-32 animate-bounce" />
  </div>

  <script>
    setTimeout(() => {
      document.getElementById('splash').style.display = 'none';
    }, 3000);
  </script>

  <section class="mb-6 p-4 bg-blue-50 rounded-xl text-sm text-blue-800">
    <p>
      Bienvenido a <strong>FuturoCientífico</strong>, tu espacio para descubrir, aprender y crecer en el mundo de la ciencia.
      Aquí encontrarás noticias diarias, recursos educativos y consejos para tu carrera científica.
    </p>
  </section>

  <h2 class="text-2xl font-bold mb-4">Últimas noticias científicas</h2>
  <div id="articles" class="space-y-6"></div>

  <script type="module">
    const container = document.querySelector('#articles');
    fetch('/articles.json')
      .then(res => res.json())
      .then(data => {
        data.sort((a, b) => new Date(b.date) - new Date(a.date)).forEach(article => {
          container.innerHTML += `
            <article class="bg-white rounded-xl p-4 shadow-md">
              <h3 class="text-lg font-semibold text-blue-900">${article.title_es}</h3>
              <p class="text-sm text-gray-600">${article.source} | ${new Date(article.date).toLocaleDateString()}</p>
              <a href="${article.url}" target="_blank" class="text-blue-700 hover:underline mt-2 block">Leer más</a>
            </article>`;
        });
      });
  </script>
</Layout>
